# Production environment configuration

# Application settings
spring.application.name=autotrader-backend
server.port=8080

# Database configuration
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://db:5432/autotrader}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:autotrader}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:autotrader}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false

# Connection pooling
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1800000

# S3 Storage configuration
storage.s3.enabled=${STORAGE_S3_ENABLED:true}
storage.s3.endpoint=${STORAGE_S3_ENDPOINT:http://minio:9000}
storage.s3.bucket-name=${STORAGE_S3_BUCKET_NAME:autotrader-assets}
storage.s3.access-key=${STORAGE_S3_ACCESS_KEY:minioadmin}
storage.s3.secret-key=${STORAGE_S3_SECRET_KEY:minioadmin}
storage.s3.region=${STORAGE_S3_REGION:us-east-1}
storage.s3.create-bucket-if-not-exist=true

# File upload settings
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Security settings
jwt.secret=${JWT_SECRET:auto7raderJwtS3cr3tK3yF0rT0k3nS1gn1ng}
jwt.expirationMs=86400000

# Actuator endpoints for monitoring
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when_authorized

# Logging configuration
logging.level.root=INFO
logging.level.com.autotrader=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# CORS configuration
cors.allowed-origins=*
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=*
cors.exposed-headers=Authorization
cors.max-age=3600

# Performance optimization
spring.jpa.properties.hibernate.jdbc.batch_size=30
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Cache configuration
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=500,expireAfterAccess=600s

# Swagger/OpenAPI
springdoc.swagger-ui.path=/swagger-ui.html
